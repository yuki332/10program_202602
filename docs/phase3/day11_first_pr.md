# Day 11: はじめてのPR — Branch から Merge までの一連の流れ

## 学習目標

- Gitのブランチを作成し、変更をコミット・プッシュする流れを体験する
- GitHub上でプルリクエスト（PR）を作成する方法を覚える
- PRがマージされてmainに反映される仕組みを理解する

## 題材

`team_docs/members/[名前].md` に自己紹介ファイルを作成し、PRを出してマージする。
コーディングは不要。Markdownファイルの作成だけでGitフローを学ぶ。

## ファイル構成

```
team_docs/
└── members/
    └── [名前].md    ← 各自が自分の自己紹介ファイルを作成する
```

| ファイル | 作成者 | 内容 |
|---------|-------|------|
| `members/itoh.md` | 伊藤 | 伊藤の自己紹介 |
| `members/kurihara.md` | 栗原 | 栗原の自己紹介 |
| `members/saruwatari.md` | 猿渡 | 猿渡の自己紹介 |

---

## 準備

### 1. リポジトリの最新状態を取得

```bash
# mainブランチに移動
git checkout main

# 最新の状態を取得
git pull
```

### 2. team_docs フォルダの確認

```bash
# team_docs/members/ フォルダが存在するか確認
ls team_docs/members/
```

> フォルダが存在しない場合は、講師が事前に作成する。

---

## 手順

### ステップ 1: ブランチを作成する

mainブランチから、自分専用の作業ブランチを作成する。

```bash
# mainブランチにいることを確認
git branch

# 自分のブランチを作成して移動する
# 例: 伊藤さんの場合
git checkout -b feature/add-member-itoh
```

> **ブランチ名のルール**: `feature/` で始め、何をするかがわかる名前をつける。

**確認**: 以下のコマンドで、新しいブランチにいることを確認する。

```bash
git branch
# * feature/add-member-itoh   ← * がついているのが現在のブランチ
#   main
```

### ステップ 2: 自己紹介ファイルを作成する

`team_docs/members/` に自分の自己紹介ファイルを作成する。

**ファイル名**: `[名前].md`（例: `itoh.md`）

以下のテンプレートをコピーして、自分の内容に書き換える。

```markdown
# 自己紹介: [名前]

## 基本情報

- 名前: [フルネーム]
- ニックネーム: [あれば]
- 所属: [部署名]

## プログラミング経験

- 経験年数: [年数]
- 使ったことのある言語: [言語名]

## 研修で学びたいこと

- [学びたいこと1]
- [学びたいこと2]

## ひとこと

[自由にひとこと]
```

> VS Codeでファイルを新規作成し、上記のテンプレートを貼り付けて編集する。

### ステップ 3: 変更をステージングする

作成したファイルをGitのステージング（次のコミットに含める準備）に追加する。

```bash
# 変更状況を確認
git status
# Untracked files:
#   team_docs/members/itoh.md

# ファイルをステージングに追加
git add team_docs/members/itoh.md
```

**確認**: ステージングされたことを確認する。

```bash
git status
# Changes to be committed:
#   new file:   team_docs/members/itoh.md
```

### ステップ 4: コミットする

ステージングした変更をコミット（記録）する。

```bash
git commit -m "feat: 伊藤の自己紹介ファイルを追加"
```

> **コミットメッセージのルール**: `feat:` で始め、何をしたかを簡潔に書く。

### ステップ 5: プッシュする

ローカルのコミットをGitHub（リモート）に送信する。

```bash
git push -u origin feature/add-member-itoh
```

> `-u origin` は「このブランチをGitHubの同名ブランチに紐づける」という意味。初回のpushのみ必要。

### ステップ 6: PRを作成する

GitHub上でプルリクエストを作成する。

1. GitHubのリポジトリページを開く
2. 「Compare & pull request」ボタンが表示されるのでクリック
3. 以下の内容を入力する:

```
タイトル: feat: [名前]の自己紹介ファイルを追加

本文:
## 変更内容
- team_docs/members/[名前].md を新規作成
- 自己紹介を記載

## 確認方法
- [ ] ファイルが正しい場所に作成されている
- [ ] Markdownの書式が正しい
- [ ] 内容が記入されている
```

4. 「Create pull request」ボタンをクリック

### ステップ 7: マージする

今回は練習のため、自分でマージする（Day 12からはレビューを経てマージする）。

1. PRページの下部にある「Merge pull request」をクリック
2. 「Confirm merge」をクリック
3. マージ完了のメッセージが表示される

### ステップ 8: ローカルのmainを更新する

マージ後、ローカルのmainブランチを最新状態にする。

```bash
# mainブランチに戻る
git checkout main

# 最新の状態を取得（マージされた内容が反映される）
git pull
```

**確認**: 自分の自己紹介ファイルがmainブランチに存在することを確認する。

```bash
ls team_docs/members/
# itoh.md
```

---

## 実験

### 実験1: ブランチの確認

1. ステップ1でブランチを作成した後、以下のコマンドを実行する

```bash
git log --oneline --all --graph
```

2. mainブランチと自分のブランチの関係を観察する

### 実験2: PRの差分を確認する

1. GitHub上でPRを作成した後、「Files changed」タブをクリックする
2. 表示される差分（diff）を確認する
3. 緑色の行（追加）と赤色の行（削除）の意味を確認する

### 実験3: マージ後の確認

1. マージ後に以下のコマンドを実行する

```bash
git checkout main
git pull
git log --oneline -5
```

2. マージコミットが存在することを確認する
3. 自分のコミットメッセージがログに含まれていることを確認する

---

## 実験レポート

`day11_report.md` として保存し、コミットすること。

```
実験1: ブランチの確認
  git log --oneline --all --graph の出力:（実験後にコピペ）
  mainと自分のブランチの関係:（図や言葉で説明）

実験2: PRの差分を確認する
  予想:（実験前に書く — PRの「Files changed」に何が表示されると思うか？）
  結果:（実験後に書く — 実際に何が表示されたか）
  わかったこと:（緑と赤の行はそれぞれ何を意味するか）

実験3: マージ後の確認
  予想:（実験前に書く — マージ後、mainブランチには何が起きると思うか？）
  結果:（実験後に書く — git log の出力をコピペ）
  わかったこと:（マージとは何をしているのか、自分の言葉で説明）
```

---

## 完了条件

- [ ] 自分のブランチを作成した
- [ ] `team_docs/members/[名前].md` を作成してコミットした
- [ ] GitHubにプッシュした
- [ ] PRを作成した
- [ ] PRをマージした
- [ ] ローカルのmainを `git pull` で更新した
- [ ] 実験レポート（`day11_report.md`）を提出した
