# Phase 2: Webアプリの3層構造を体感する

## 目的

**データがどこにあり、どう流れるかを体感する。**
Phase 1で体験した「消えるデータ」の問題を、Client → Server → Database と層を1つずつ追加しながら解決していく。

コードの実装はAIが行う。人間がやることは以下の4つ。

1. **IPOカードをAIに渡してコードを生成させる** — 教材のIPOカードをコピーしてAIに渡す
2. **生成されたファイルを確認する** — どのファイルがどの層に対応するかを理解する
3. **実験を実施する** — 教材の手順に従い、データの挙動を観察する
4. **実験レポートを書く** — 観察した結果を自分の言葉で記録する

---

## 全体像: 3層構造とデータの流れ

```
┌─────────────────┐        ┌─────────────────┐        ┌─────────────────┐
│     Client      │  HTTP  │     Server      │  ORM   │    Database     │
│    (ブラウザ)    │ ────► │    (Node.js)    │ ────► │    (SQLite)     │
│                 │ ◄──── │                 │ ◄──── │                 │
├─────────────────┤        ├─────────────────┤        ├─────────────────┤
│ 確認: F12       │        │ 確認: ターミナル │        │ 確認: Prisma    │
│ 編集: HTML/JS   │        │ 編集: server.js  │        │   Studio/DBファイル│
└─────────────────┘        └─────────────────┘        └─────────────────┘
```

Phase 2では、この3層を **1日1層ずつ** 追加して理解する。

| Day | 層の構成 | 学ぶこと |
|-----|---------|---------|
| Day 6 | **Client のみ** | データはブラウザの中にある |
| Day 7 | **Client + Server** | データをサーバーに送れる |
| Day 8 | **Client + Server + DB** | データをDBに保存できる（Create） |
| Day 9 | **全層を往復** | DBのデータを画面に表示できる（Read） |
| Day 10 | **永続化の証明** | 再起動してもデータが残る |

---

## 開発環境の準備

Phase 2を始める前に、以下の環境を整える。Windows の WSL（Ubuntu）上で作業する。

### 1. WSL + VS Code の確認

VS Code がインストール済みであること。WSL 内のフォルダを VS Code で開いて作業する。

1. VS Code の拡張機能「**WSL**」（Microsoft製）がインストールされていることを確認する
2. WSL のターミナルを開き、作業フォルダで `code .` を実行すると VS Code が WSL に接続して開く
3. VS Code 内のターミナル（`Ctrl + `` `）は WSL のシェルになる — ここでコマンドを実行する

### 2. Node.js の確認

WSL のターミナルで以下を実行し、バージョンが表示されることを確認する。

```bash
node -v
# v20.x.x のように表示されればOK
```

表示されない場合は、nodenv でインストールする（講師に確認すること）。

### 3. npm の確認

```bash
npm -v
# 10.x.x のように表示されればOK
```

> npm は Node.js と一緒にインストールされる。パッケージ（ライブラリ）を管理するツール。

### 4. ブラウザの開発者ツール

Windows 側の Google Chrome を使う。以下を確認する。

1. Chrome を開く
2. **F12キー** を押す → 開発者ツールが開く
3. **Console タブ** をクリック → ここにブラウザ側のログが表示される

> WSL で起動したサーバー（`http://localhost:3000`）には、Windows 側のブラウザからそのままアクセスできる。

### 5. 作業ディレクトリの準備

```bash
# 自分のPhase 2フォルダに移動（名前は自分のものに変える）
cd members/[あなたの名前]/phase2_web
```

---

## Phase 2 チェックリスト

| Day | テーマ | 層の構成 | 実験レポート | 完了 |
|-----|-------|---------|------------|------|
| Day 6 | データはブラウザの中にある | Client | `day6_report.md` | [ ] |
| Day 7 | データをサーバーに送る | Client + Server | `day7_report.md` | [ ] |
| Day 8 | データをDBに保存する | Client + Server + DB | `day8_report.md` | [ ] |
| Day 9 | DBのデータを画面に表示する | Client + Server + DB | `day9_report.md` | [ ] |
| Day 10 | 永続化の証明 & 総まとめ | 全体まとめ | `day10_report.md` | [ ] |

---

## 次のPhaseへ

Phase 2を完了したあなたは、以下を学びました。

- **3層構造** — Client / Server / Database の役割と場所
- **データの流れ** — 書き込み（Client → Server → DB）と読み取り（DB → Server → Client）
- **永続化** — データベースを使えばデータは消えない
- **ファイルとレイヤーの対応** — どのファイルを編集すると、どこが変わるか

Phase 3では、**チーム開発** の作法を学びます。
複数人で同じコードを編集するとき、どうやって衝突を避けるか？
Gitのブランチ、プルリクエスト、コンフリクト解決を体験します。
